# BWW FortiAP 231F Configuration
# Version: 7.2.3

config system global
    set hostname "bww-fap231f-01"
    set timezone 04
    set admin-ssh-port 22
    set admin-https-ssl-versions tls1-2 tls1-3
end

# Admin user
config system admin
    edit "admin"
        set password ENC xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
        set trusthost1 10.0.0.0 255.255.255.0
        set accprofile "super_admin"
    next
end

# Network interfaces
config system interface
    edit "mgmt"
        set vdom "root"
        set mode static
        set ip 192.168.20.200 255.255.255.0
        set allowaccess ping https ssh http
        set description "Management"
    next
end

# Default route
config router static
    edit 1
        set gateway 192.168.20.1
        set device "mgmt"
    next
end

# Wireless controller configuration
config wireless-controller wtp-profile
    edit "FAP231F-default"
        set platform-type "231F"
        set handoff-rssi 25
        set handoff-sta-thresh 30
        config radio-1
            set band 802.11b,g,n,ax
            set auto-power-level enable
            set channel "auto"
            set vaps "BWW-STAFF"
        end
        config radio-2
            set band 802.11a,n,ac,ax
            set auto-power-level enable
            set channel "auto"
            set vaps "BWW-STAFF-5G BWW-GUEST-5G"
        end
    next
end

# WLAN configurations
config wireless-controller vap
    # Staff Network (2.4GHz)
    edit "BWW-STAFF"
        set ssid "BWW-STAFF"
        set security wpa2-only-enterprise
        set auth 802.1x
        set schedule "always"
        set max-clients 50
        set radius-server "192.168.20.1"
        set radius-server-port 1812
        set radius-server-key "bww-staff-secret"
    next
    
    # Staff Network (5GHz)
    edit "BWW-STAFF-5G"
        set ssid "BWW-STAFF-5G"
        set security wpa2-only-enterprise
        set auth 802.1x
        set schedule "always"
        set max-clients 50
        set radius-server "192.168.20.1"
        set radius-server-port 1812
        set radius-server-key "bww-staff-secret"
        set band 802.11a,n,ac,ax
    next
    
    # Guest Network (5GHz only)
    edit "BWW-GUEST-5G"
        set ssid "BWW-GUEST"
        set security captive-portal
        set schedule "always"
        set max-clients 100
        set vlanid 310
        set band 802.11a,n,ac,ax
    next
end

# Captive Portal configuration
config wireless-controller hotspot20-hs-profile
    edit "BWW-GUEST-PORTAL"
        set access-network-type private-network
        set venue-group "restaurant"
        set venue-type "restaurant"
        set venue-name "Buffalo Wild Wings"
        set osu-ssid "BWW-GUEST-PORTAL"
        set osu-method oma-dm
        set osu-service-nai "bww.guest.wifi"
        config nai-realm
            edit 1
                set nai-realm "bww.guest.wifi"
                set eap-methods "21"
                set encoding utf-8
            next
        end
    next
end

# SNMP configuration
config system snmp sysinfo
    set status enable
    set description "BWW FortiAP 231F"
    set contact-info "BWW IT Department"
    set location "Buffalo Wild Wings Store"
end

config system snmp community
    edit 1
        set name "public"
        config hosts
            edit 1
                set ip 10.0.0.11 255.255.255.255
            next
        end
    next
end

# Log settings
config log setting
    set fwpolicy-implicit-log enable
end

# Save configuration
end
