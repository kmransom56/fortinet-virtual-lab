# Sonic FortiSwitch 224E Configuration
# Version: 7.2.3

config system global
    set hostname "sonic-fsw224e-01"
    set timezone 04
    set admin-ssh-port 22
    set admin-https-ssl-versions tls1-2 tls1-3
end

# Admin user
config system admin
    edit "admin"
        set password ENC xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
        set trusthost1 10.0.0.0 255.255.255.0
        set accprofile "super_admin"
    next
end

# Network interfaces
config system interface
    edit "mgmt"
        set vdom "root"
        set mode static
        set ip 192.168.30.100 255.255.255.0
        set allowaccess ping https ssh http
        set description "Management"
    next
    edit "internal"
        set vdom "root"
        set type physical
        set vlanid 1
        set interface "port1"
    next
end

# Default route
config router static
    edit 1
        set gateway 192.168.30.1
        set device "mgmt"
    next
end

# FortiLink configuration
config switch-controller global
    set fortilink-discovery "fortilink"
end

config switch-controller fortilink-settings
    set fortilink "fortilink"
    set fortilink-auto-discovery "fortilink"
    set fortilink-auto-isl 1
    set inactive-timer 15
end

# Port configurations
config switch-controller managed-switch
    edit "sonic-fsw224e-01"
        set fsw-wan1-peer "port24"
        config ports
            edit "port1"
                set vlan "DATA"
                set allowed-vlans "DATA,VOICE,GUEST"
                set untagged-vlans "DATA"
                set type physical
                set poe-status enable
            next
            edit "port2"
                set vlan "DATA"
                set allowed-vlans "DATA,VOICE,GUEST"
                set untagged-vlans "DATA"
                set type physical
                set poe-status enable
            next
            # Repeat for ports 3-23 with similar configuration
            edit "port24"
                set vlan "FORTILINK"
                set type physical
                set fortilink enable
            next
        end
    next
end

# VLANs
config system interface
    edit "DATA"
        set vdom "root"
        set ip 192.168.30.101 255.255.255.0
        set allowaccess ping
        set role lan
        set interface "internal"
        set vlanid 100
    next
    edit "VOICE"
        set vdom "root"
        set ip 192.168.31.1 255.255.255.0
        set allowaccess ping
        set role lan
        set interface "internal"
        set vlanid 200
    next
    edit "GUEST"
        set vdom "root"
        set ip 192.168.32.1 255.255.255.0
        set allowaccess ping
        set role lan
        set interface "internal"
        set vlanid 300
    next
end

# LLDP configuration
config switch-controller lldp-settings
    set status enable
    set tx-hold 4
    set tx-interval 30
    set fast-start-interval 2
end

# SNMP configuration
config system snmp sysinfo
    set status enable
    set description "Sonic FortiSwitch 224E"
    set contact-info "IT Department"
    set location "Sonic Store"
end

config system snmp community
    edit 1
        set name "public"
        config hosts
            edit 1
                set ip 10.0.0.11 255.255.255.255
            next
        end
    next
end

# Log settings
config log setting
    set fwpolicy-implicit-log enable
    set fwpolicy6-implicit-log enable
end

# Save configuration
end
